import{r as c,o as S,i as d,e as p,w as i,a as l,j as w,k as q,b as n,h as u,c as k,l as x,F as v,t as g,u as z,m as V}from"./index-C2Vbri2L.js";const B=["src"],N={__name:"ScanHistoryList",setup(D){const m=c([]),_=c(!1),y=c(""),t=c({current:1,pageSize:10,total:0}),b=[{title:"STT",key:"stt",customRender:({index:e})=>e+1},{title:"Ảnh đối tượng",key:"object_image",dataIndex:"object_image"},{title:"Tên QR Code",key:"qr_name",dataIndex:"qr_name"},{title:"Tên đối tượng",key:"object_name",dataIndex:"object_name"},{title:"Loại QR Code",key:"qr_type",dataIndex:"qr_type"},{title:"Khách hàng",key:"customer",dataIndex:"customer"},{title:"Tỉnh thành",key:"city",dataIndex:"city"},{title:"Vị trí",key:"location",dataIndex:"location"},{title:"SĐT",key:"phone",dataIndex:"phone"},{title:"IP",key:"ip",dataIndex:"ip"},{title:"Hệ điều hành",key:"os",dataIndex:"os"},{title:"Ứng dụng",key:"app",dataIndex:"app"},{title:"Thời gian",key:"created_at",dataIndex:"created_at"}],s=async()=>{_.value=!0;try{const e=await w.get("https://api-qrcode.labit365.com/api/scan-history",{params:{search:y.value,page:t.value.current,per_page:t.value.pageSize},withCredentials:!0});m.value=e.data.data,t.value.total=e.data.pager.total}catch{q.error("Không thể tải dữ liệu")}finally{_.value=!1}},f=e=>{t.value.current=e.current,t.value.pageSize=e.pageSize,s()};return S(s),(e,r)=>{const I=l("a-input"),T=l("a-button"),C=l("a-space"),h=l("a-tag"),j=l("a-table");return n(),d("div",null,[p(C,{style:{"margin-bottom":"16px"}},{default:i(()=>[p(I,{value:y.value,"onUpdate:value":r[0]||(r[0]=a=>y.value=a),placeholder:"Tìm theo loại, tỉnh...",onPressEnter:s},null,8,["value"]),p(T,{type:"primary",onClick:s},{default:i(()=>r[1]||(r[1]=[u("Tìm kiếm")])),_:1})]),_:1}),p(j,{columns:b,"data-source":m.value,pagination:t.value,"row-key":"id",loading:_.value,onChange:f},{bodyCell:i(({column:a,record:o})=>[a.key==="object_image"?(n(),d(v,{key:0},[o.object_image?(n(),d("img",{key:0,src:o.object_image,alt:"Ảnh",style:{width:"50px",height:"50px","object-fit":"cover"}},null,8,B)):x("",!0)],64)):a.key==="os"?(n(),k(h,{key:1},{default:i(()=>[u(g(o.os),1)]),_:2},1024)):a.key==="app"?(n(),k(h,{key:2,color:"blue"},{default:i(()=>[u(g(o.app||"Không xác định"),1)]),_:2},1024)):a.key==="created_at"?(n(),d(v,{key:3},[u(g(z(V)(o.created_at)),1)],64)):x("",!0)]),_:1},8,["data-source","pagination","loading"])])}}};export{N as default};
