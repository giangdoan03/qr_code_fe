import{j as N,r as g,o as T,i as p,e as t,a as n,w as e,k as I,b as o,c as m,l as w,F as B,h as l,t as r,z as H}from"./index-C2Vbri2L.js";const S=N.create({baseURL:"https://api-qrcode.labit365.com/api",withCredentials:!0}),V=()=>S.get("/purchase-history"),D={key:1},K={__name:"PurchaseHistoryList",setup(L){const _=g([]),c=g(!1),u=g({total:0,current:1,pageSize:10}),f=[{title:"STT",key:"stt"},{title:"Tên gói",dataIndex:"package_name",key:"package_name"},{title:"Số lượng mã còn lại",dataIndex:"remaining",key:"remaining"},{title:"Trạng thái gói",key:"status"},{title:"Trạng thái hết hạn",key:"expired"},{title:"Trạng thái nâng cấp",dataIndex:"upgrade_status",key:"upgrade_status"},{title:"Ngày đăng ký",dataIndex:"registered_at",key:"registered_at"},{title:"Ngày bắt đầu hợp đồng",dataIndex:"start_date",key:"start_date"},{title:"Ngày hết hạn theo hợp đồng",dataIndex:"end_date",key:"end_date"},{title:"Người đăng ký",dataIndex:"registered_by",key:"registered_by"},{title:"Hành động",key:"action"}];return T(async()=>{c.value=!0;try{const i=await V();_.value=i.data.data,u.value.total=i.data.pager.total}catch{I.error("Không thể tải dữ liệu lịch sử mua gói")}finally{c.value=!1}}),(i,h)=>{const x=n("a-page-header"),d=n("a-tag"),y=n("a-button"),k=n("a-tooltip"),b=n("a-space"),v=n("a-table");return o(),p("div",null,[t(x,{title:"Lịch sử mua gói"}),t(v,{columns:f,"data-source":_.value,pagination:u.value,"row-key":"id",loading:c.value},{bodyCell:e(({column:s,record:a,index:C})=>[s.key==="stt"?(o(),p(B,{key:0},[l(r(C+1),1)],64)):s.key==="status"?(o(),p("div",D,[t(d,{color:a.status==="pending"?"orange":"green"},{default:e(()=>[l(r(a.status==="pending"?"Chờ duyệt":"Kích hoạt"),1)]),_:2},1032,["color"]),h[0]||(h[0]=H("br",null,null,-1)),t(d,{color:a.paid?"green":"red"},{default:e(()=>[l(r(a.paid?"Đã thanh toán":"Chưa thanh toán"),1)]),_:2},1032,["color"])])):s.key==="expired"?(o(),m(d,{key:2,color:a.expired?"red":"green"},{default:e(()=>[l(r(a.expired?"Hết hạn":"Chưa hết hạn"),1)]),_:2},1032,["color"])):s.key==="action"?(o(),m(b,{key:3},{default:e(()=>[t(k,{title:"Chi tiết"},{default:e(()=>[t(y,{type:"link",icon:"info-circle"})]),_:1}),t(k,{title:"Thanh toán"},{default:e(()=>[t(y,{type:"link",icon:"dollar-circle"})]),_:1})]),_:1})):w("",!0)]),_:1},8,["data-source","pagination","loading"])])}}};export{K as default};
