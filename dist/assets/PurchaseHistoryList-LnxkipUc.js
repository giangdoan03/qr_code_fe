import{i as c,o as m,n as y,g as l,r as t,w as k,q as f,f as r,d,A as g,N as u}from"./index-q_THj4Qt.js";import{g as x}from"./purchaseHistory-DxsmAiGA.js";const R={__name:"PurchaseHistoryList",setup(v){const o=c([]),i=c(!1);m(async()=>{try{i.value=!0;const e=await x({per_page:100});o.value=e.data.data||[]}catch(e){console.error(e),f.error("Không thể tải thông tin gói")}finally{i.value=!1}});const _=[{title:"STT",key:"stt",customRender:({index:e})=>e+1},{title:"Người tạo",dataIndex:"user_name",key:"user_name"},{title:"Email",dataIndex:"user_email",key:"user_email"},{title:"Tên gói",dataIndex:"product_name",key:"product_name"},{title:"Trạng thái",key:"status",customRender:({record:e})=>{const a=t("a-tag"),n=new Date(e.expires_at)<new Date,s=e.is_active==0;return u(a,{color:n||s?"red":"green"},()=>n||s?"Đã ngừng hoạt động":"Đang hoạt động")}},{title:"Thanh toán",key:"is_paid",customRender:({record:e})=>{const a=t("a-tag");return u(a,{color:e.is_paid?"blue":"orange"},()=>e.is_paid?"Đã thanh toán":"Chưa thanh toán")}},{title:"Ngày bắt đầu",dataIndex:"starts_at",key:"starts_at",customRender:({text:e})=>g(e)},{title:"Ngày hết hạn",dataIndex:"expires_at",key:"expires_at",customRender:({text:e})=>g(e)},{title:"Ghi chú",dataIndex:"note",key:"note",customRender:({text:e})=>e||"Không có"}];return(e,a)=>{const n=t("a-page-header"),s=t("a-table"),p=t("a-empty"),h=t("a-spin");return r(),y("div",null,[l(n,{title:"Danh sách các gói đã đăng ký"}),l(h,{spinning:i.value},{default:k(()=>[o.value.length>0?(r(),d(s,{key:0,columns:_,"data-source":o.value,rowKey:"id",bordered:"",pagination:{pageSize:10}},null,8,["data-source"])):(r(),d(p,{key:1,description:"Chưa có gói nào được đăng ký"}))]),_:1},8,["spinning"])])}}};export{R as default};
